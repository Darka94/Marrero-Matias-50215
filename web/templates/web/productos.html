{% extends "web/home.html" %}
{# Cargamos la librería #}
{% load django_bootstrap5 %}
{# Widget Tweaks #}
{% load widget_tweaks %}
{# Archivos #}
{% load static %}

    
{% block body %}
<div align="left" class="btn_crear mb-3">
    <a href="crear" type="button" class="btn btn-primary">Crear</a>
</div>

<div class="table-responsive">
    <table class="table table-dark">
        <thead>
            <tr>
                <th scope="col">Imagen</th>
                <th scope="col">Nombre</th>
                <th scope="col">Precio</th>
                <th scope="col">Categoria</th>
                <th scope="col">Acciones</th>
            </tr>
        </thead>
        <tbody>
            <!-- Recorremos los objetos o registros que tenemos en nuestra tabla 'jugos' y los listamos -->
            {% for producto in object_list %}
            <tr>
                <td><img src="{{ producto.imagen.url }}" alt="{{ producto.nombre }}" class="img-fluid" style="max-width: 100px;"></td>
                <td>{{ producto.nombre }}</td>
                <td>{{ producto.precio }}</td>
                <td>{{ producto.categoria }}</td>
                <td>
                    <!-- Usaremos un formulario que realizará la tarea de eliminar un registro o jugo desde la misma tabla HTML -->
                    <form method="POST" action="eliminar/{{ producto.id }}">
                        {% csrf_token %}
                        <div class="btn-group">
                            <!-- Creamos 3 botones que son ver, Editar y Eliminar, nos sirven para gestionar nuestros registros o jugos -->
                            <a href="detalle/{{producto.pk }}" title="Ver" class="btn btn-success">Ver</a>
                            <a href="editar/{{producto.pk}}" title="Editar" type="button" class="btn btn-primary">Editar </a>

                            <button class="btn btn-danger" onclick="return eliminar();" type="submit">Eliminar</button>
                        </div>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<script type="text/javascript">
 
    function eliminar() {
      var x = confirm("Eliminar Producto ?");
      if (x)
        return true;
      else
        return false;
    }

  </script>
  {% if messages %}
  <ul class="messages list-group mb-3">
    {% for message in messages %}
    <li {% if message.tags %} class="{{ message.tags }} list-group-item list-group-item-primary"{% endif %}>{{ message }}</li>
    {% endfor %}
  </ul>
{% endif %}
{% endblock body %}
